Version 4
SHEET 1 2004 820
WIRE 880 -528 784 -528
WIRE 1072 -528 944 -528
WIRE 784 -432 784 -528
WIRE 880 -432 784 -432
WIRE 1072 -432 1072 -528
WIRE 1072 -432 960 -432
WIRE 80 -368 32 -368
WIRE 272 -368 160 -368
WIRE 368 -368 272 -368
WIRE 1200 -368 1120 -368
WIRE -400 -352 -480 -352
WIRE -112 -352 -320 -352
WIRE 1120 -352 1120 -368
WIRE 1200 -352 1200 -368
WIRE 272 -336 272 -368
WIRE -224 -304 -336 -304
WIRE 368 -304 368 -368
WIRE 672 -304 368 -304
WIRE 784 -304 784 -432
WIRE 784 -304 752 -304
WIRE 848 -304 784 -304
WIRE 848 -288 848 -304
WIRE 880 -288 848 -288
WIRE 1072 -272 1072 -432
WIRE 1072 -272 944 -272
WIRE 1120 -272 1072 -272
WIRE 1136 -272 1120 -272
WIRE 272 -256 272 -272
WIRE 880 -256 848 -256
WIRE -480 -240 -480 -352
WIRE -400 -240 -480 -240
WIRE -112 -240 -320 -240
WIRE 672 -240 368 -240
WIRE 848 -240 848 -256
WIRE 848 -240 752 -240
WIRE 928 -224 928 -240
WIRE 1104 -208 1008 -208
WIRE 1296 -208 1168 -208
WIRE -224 -192 -336 -192
WIRE -480 -176 -480 -240
WIRE -480 -176 -544 -176
WIRE 80 -176 32 -176
WIRE 272 -176 160 -176
WIRE 368 -176 368 -240
WIRE 368 -176 272 -176
WIRE -768 -160 -768 -192
WIRE 272 -144 272 -176
WIRE -480 -128 -480 -176
WIRE -400 -128 -480 -128
WIRE -112 -128 -320 -128
WIRE 1008 -112 1008 -208
WIRE 1104 -112 1008 -112
WIRE 1296 -112 1296 -208
WIRE 1296 -112 1184 -112
WIRE -224 -80 -336 -80
WIRE 272 -64 272 -80
WIRE 560 -48 416 -48
WIRE 752 -48 640 -48
WIRE 848 -48 752 -48
WIRE 1424 -48 1344 -48
WIRE 1344 -32 1344 -48
WIRE 1424 -32 1424 -48
WIRE -480 -16 -480 -128
WIRE -400 -16 -480 -16
WIRE -112 -16 -320 -16
WIRE 752 -16 752 -48
WIRE 848 16 848 -48
WIRE 896 16 848 16
WIRE 1008 16 1008 -112
WIRE 1008 16 976 16
WIRE 1072 16 1008 16
WIRE -224 32 -336 32
WIRE 1072 32 1072 16
WIRE 1104 32 1072 32
WIRE 1296 48 1296 -112
WIRE 1296 48 1168 48
WIRE 1344 48 1296 48
WIRE 1360 48 1344 48
WIRE 752 64 752 48
WIRE 1104 64 1072 64
WIRE 896 80 848 80
WIRE 1072 80 1072 64
WIRE 1072 80 976 80
WIRE 1152 96 1152 80
WIRE 560 144 416 144
WIRE 752 144 640 144
WIRE 848 144 848 80
WIRE 848 144 752 144
WIRE 752 176 752 144
WIRE 752 256 752 240
WIRE -752 496 -864 496
WIRE 64 496 -48 496
WIRE -864 528 -864 496
WIRE -48 528 -48 496
WIRE -752 688 -864 688
WIRE 64 688 -48 688
WIRE -864 720 -864 688
WIRE -48 720 -48 688
FLAG -384 -304 0
FLAG -384 -192 0
FLAG -384 -80 0
FLAG -384 32 0
FLAG -768 -80 0
FLAG -224 -304 V_0_deg
FLAG -224 -192 V_90_deg
FLAG -224 -80 V_180_deg
FLAG -224 32 V_270_deg
FLAG -864 608 0
FLAG -752 496 V_0_deg
FLAG -864 800 0
FLAG -752 688 V_90_deg
FLAG -48 608 0
FLAG 64 496 V_180_deg
FLAG -48 800 0
FLAG 64 688 V_270_deg
FLAG -112 -352 00
FLAG -112 -128 11
FLAG 752 256 0
FLAG 752 64 0
FLAG -112 -240 01
FLAG -112 -16 10
FLAG 272 -64 0
FLAG 272 -256 0
FLAG 32 -176 11
FLAG 32 -368 00
FLAG 416 144 10
FLAG 416 -48 01
FLAG 1088 592 0
FLAG 1088 512 +4.5
FLAG 1120 16 +4.5
FLAG 1120 80 0
FLAG 896 -304 +4.5
FLAG 896 -240 0
FLAG 928 -224 +4.5
FLAG 1152 96 +4.5
FLAG 1136 -272 vout
FLAG -768 -192 vin
FLAG -544 -176 vin
FLAG 1424 -32 0
FLAG 1200 -352 0
SYMBOL sw -416 -352 R270
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL sw -416 -240 R270
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL sw -416 -128 R270
SYMATTR InstName S3
SYMATTR Value MYSW
SYMBOL sw -416 -16 R270
SYMATTR InstName S4
SYMATTR Value MYSW
SYMBOL voltage -768 -176 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 118 56 VBottom 2
WINDOW 39 90 64 VBottom 2
SYMATTR InstName V1
SYMATTR Value SINE(2.25 1u {RF_Freq})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser=50
SYMBOL voltage -864 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL voltage -864 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 1 {SW_time} 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL voltage -48 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 1 {2*SW_time} 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL voltage -48 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 1 {3*SW_time} 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL cap 768 48 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value {C_Sample}
SYMBOL cap 768 240 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value {C_Sample}
SYMBOL res 656 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 0.1
SYMBOL res 656 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.1
SYMBOL cap 288 -272 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value {C_Sample}
SYMBOL cap 288 -80 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value {C_Sample}
SYMBOL res 176 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 176 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL res 1200 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 5k
SYMBOL res 992 0 R90
WINDOW 0 13 112 VBottom 2
WINDOW 3 24 58 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.1
SYMBOL res 992 64 R90
WINDOW 0 46 3 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 0.1
SYMBOL res 976 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL res 768 -320 R90
WINDOW 0 13 112 VBottom 2
WINDOW 3 24 58 VTop 2
SYMATTR InstName R9
SYMATTR Value 0.1
SYMBOL res 768 -256 R90
WINDOW 0 46 3 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 0.1
SYMBOL voltage 1088 496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 4.5
SYMBOL OpAmps\\ADA4805 912 -272 R0
WINDOW 3 64 27 Left 2
SYMATTR InstName U3
SYMBOL OpAmps\\ADA4805 1136 48 R0
WINDOW 3 43 29 Left 2
SYMATTR InstName U4
SYMBOL cap 944 -544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.35n
SYMBOL cap 1168 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 0.35n
SYMBOL res 1104 -368 R0
SYMATTR InstName R11
SYMATTR Value 60k
SYMBOL res 1328 -48 R0
SYMATTR InstName R12
SYMATTR Value 60k
TEXT -888 80 Left 2 !.model MYSW SW(Vt=0.9 Vh=0 Ron=1 Roff=100G)
TEXT 104 296 Left 2 !.tran 0 400u 80u 1u\n;.noise V(V_outQ) V3 dec 10 10 100meg\n;.op
TEXT -888 120 Left 2 !.param RF_freq=15Meg LO_freq={RF_freq - Audio_freq} LO_period={1/LO_freq} SW_time={LO_period/4}
TEXT 800 232 Left 2 !.param C_Sample=4.7n
TEXT -904 384 Left 4 ;Signals for voltage-controlled switches \nused to simulate our multiplexer.
TEXT 904 392 Left 4 ;Power Connections
TEXT -928 -240 Left 2 ;RF signal in
TEXT -712 -480 Left 4 ;Multiplexer
TEXT 88 240 Left 4 ;Simulation Control
TEXT 104 440 Left 2 !;step dec param Audio_freq 1000 10000000 1
TEXT 104 408 Left 2 !.param Audio_freq=48000
TEXT 872 144 Left 2 ;R2 and R3 to emulate PE1NNZ
TEXT 1488 384 Left 4 ;Measurement
TEXT 1488 424 Left 2 !.meas vout_max max V(vout)\n.meas vout_min min V(vout)\n.meas vout_vpp param vout_max-vout_min\n.meas vin_max max V(vin)\n.meas vin_min min V(vin)\n.meas vin_vpp param vin_max-vin_min\n.meas amp_gain PARAM -vout_vpp/vin_vpp
TEXT 200 -672 Left 2 ;Given the resistor values for the op-amp biasing, one would expect the gain to be A = 100k/52 = 2000.\nHowever, we see an apparent gain of A = 500 which is thanks to the average voltage being 1/4 of the\nactual input voltage due to the signal average from the switching. We do in fact have a gain of 2000,\nbut the input to the amplifier is 1/4 what we would have expected.
